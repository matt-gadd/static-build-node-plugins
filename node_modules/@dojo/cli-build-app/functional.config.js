"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const CleanWebpackPlugin = require("clean-webpack-plugin");
const globby = require("globby");
const path = require("path");
const base_test_config_1 = require("./base.test.config");
const basePath = process.cwd();
function webpackConfig(args) {
    const config = base_test_config_1.default(args);
    const { output, plugins } = config;
    const outputPath = output.path;
    config.entry = () => {
        const functional = globby
            .sync([`${basePath}/tests/functional/**/*.ts`])
            .map((filename) => filename.replace(/\.ts$/, ''));
        const tests = {};
        if (functional.length) {
            tests.all = functional;
        }
        return tests;
    };
    config.plugins = [
        ...plugins,
        new CleanWebpackPlugin(['functional'], { root: path.join(outputPath, 'test'), verbose: false })
    ];
    config.output = Object.assign({}, output, { path: path.join(outputPath, 'test', 'functional') });
    return config;
}
exports.default = webpackConfig;
//# sourceMappingURL=functional.config.js.map