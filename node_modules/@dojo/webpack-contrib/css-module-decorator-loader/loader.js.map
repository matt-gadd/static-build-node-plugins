{"version":3,"file":"loader.js","sourceRoot":"","sources":["loader.ts"],"names":[],"mappings":";;AAAA,+BAAsC;AACtC,2BAAgC;AAGhC,MAAM,QAAQ,GAAG,OAAO,CAAC;AAEzB,MAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,EAAE,CAAC;AAC/B,MAAM,eAAe,GAAG,WAAI,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC;AACvD,MAAM,WAAW,GAAG,eAAU,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AAChF,MAAM,WAAW,GAAG,WAAW,CAAC,IAAI,IAAI,EAAE,CAAC;AAE3C,mBAA4D,OAAe,EAAE,GAAS;IACrF,IAAI,QAAQ,GAAG,OAAO,CAAC;IACvB,MAAM,YAAY,GAAG,gCAAgC,CAAC;IACtD,MAAM,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;IAE5C,EAAE,CAAC,CAAC,OAAO,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;QACnC,MAAM,GAAG,GAAG,GAAG,WAAW,IAAI,eAAQ,CAAC,IAAI,CAAC,YAAY,EAAE,QAAQ,CAAC,EAAE,CAAC;QACtE,MAAM,YAAY,GAAG,KAAK,QAAQ,OAAO,GAAG,KAAK,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;QAC/D,QAAQ,GAAG,OAAO,CAAC,OAAO,CAAC,YAAY,EAAE,oBAAoB,YAAY,GAAG,CAAC,CAAC;IAC/E,CAAC;IAED,MAAM,CAAC,QAAQ,CAAC;AACjB,CAAC;AAZD,4BAYC","sourcesContent":["import { join, basename } from 'path';\nimport { existsSync } from 'fs';\nimport * as webpack from 'webpack';\n\nconst themeKey = ' _key';\n\nconst basePath = process.cwd();\nconst packageJsonPath = join(basePath, 'package.json');\nconst packageJson = existsSync(packageJsonPath) ? require(packageJsonPath) : {};\nconst packageName = packageJson.name || '';\n\nexport default function(this: webpack.loader.LoaderContext, content: string, map?: any): string {\n\tlet response = content;\n\tconst localsRexExp = /exports.locals = {([.\\s\\S]*)};/;\n\tconst matches = content.match(localsRexExp);\n\n\tif (matches && matches.length > 0) {\n\t\tconst key = `${packageName}/${basename(this.resourcePath, '.m.css')}`;\n\t\tconst localExports = `{\"${themeKey}\": \"${key}\",${matches[1]}}`;\n\t\tresponse = content.replace(localsRexExp, `exports.locals = ${localExports};`);\n\t}\n\n\treturn response;\n}\n"]}