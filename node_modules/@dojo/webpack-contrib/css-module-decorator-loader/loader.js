"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = require("path");
const fs_1 = require("fs");
const themeKey = ' _key';
const basePath = process.cwd();
const packageJsonPath = path_1.join(basePath, 'package.json');
const packageJson = fs_1.existsSync(packageJsonPath) ? require(packageJsonPath) : {};
const packageName = packageJson.name || '';
function default_1(content, map) {
    let response = content;
    const localsRexExp = /exports.locals = {([.\s\S]*)};/;
    const matches = content.match(localsRexExp);
    if (matches && matches.length > 0) {
        const key = `${packageName}/${path_1.basename(this.resourcePath, '.m.css')}`;
        const localExports = `{"${themeKey}": "${key}",${matches[1]}}`;
        response = content.replace(localsRexExp, `exports.locals = ${localExports};`);
    }
    return response;
}
exports.default = default_1;
//# sourceMappingURL=loader.js.map