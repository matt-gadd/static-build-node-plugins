import has from '@dojo/framework/has/has';

window.__cache = window.__cache || {};
window.__cache[modulePath] = {};
/** @preserve __cache **/
export default (...args) => {
	if (has('build-time-render')) {
		return window.__communicator(modulePath, args);
	}
	else {
		const obj = window.__cache[modulePath][JSON.stringify(args)];
		if (obj.async) {
			return Promise.resolve(obj.value);
		}
		return obj.value;
	}
}
